<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="json-viewer/jquery.json-viewer.js"></script>
    <link href="json-viewer/jquery.json-viewer.css" type="text/css" rel="stylesheet">
  <script type="module">
    import { generatePositions, PositionStyle } from "./build/release.js";

    async function createChart() {
      const strategy = generatePositions(1000, 0, 10, PositionStyle.NORMALIZED, `{
  peak = 2;
  stdDev = 5;
}`);
      const data = strategy.map((val, index) => ({
        x: index,
        y: val,
      }));

      const ctx = document.getElementById('myChart').getContext('2d');
      const myChart = new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [{
            label: 'Generated Data',
            data: data,
            borderColor: 'rgba(75, 192, 192, 1)',
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderWidth: 1,
          }]
        },
        options: {
          scales: {
            x: {
              type: 'linear',
              title: {
                display: true,
                text: 'Index'
              }
            },
            y: {
              type: 'linear',
              title: {
                display: true,
                text: 'Value'
              }
            }
          }
        }
      });

      console.table(strategy)

      document.getElementById('json-renderer').innerHTML = JSON.stringify(data, null, 2);    }

    createChart();
  </script>
</head>
<body>
  <canvas id="myChart"></canvas>
  <pre id="json-renderer"></pre>
</body>
</html>
